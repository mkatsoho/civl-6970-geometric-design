\documentclass{article}
% \documentclass{beamer}
% \usetheme{Madrid}

% to include other tex files, containing tex pictures
\usepackage{standalone}

%------------------------------
% used for href/url
\usepackage{hyperref}


% used for math fomulas
\usepackage{amsmath}

% used for pictures
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{float}
\usepackage{gensymb}  % for symbols like degree

% used for codes
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\footnotesize, % Set your code to be drawn with a monospaced font
  breaklines=true, % Enables line breaking
  frame=single % Adds a frame around the code
}

% used for Graph
\usepackage{adigraph}

% used for Bayesian Network
\usepackage{tikz}
\usetikzlibrary{bayesnet}

%------------------------------
% TODO 
\tolerance=10000
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000


\usepackage{silence}
\WarningFilter{latex}{Overfull \hbox}

%------------------------------

\title{MK's Notes for CIVL-4530 Geometric Design}
\date{2024-03-10}
\author{Michael Chen}

\begin{document}
  % \pagenumbering{gobble}
  % \maketitle
  % \newpage
  % \pagenumbering{arabic}
  % \setcounter{page}{40}
  \setcounter{section}{4}

  % todo ----------------------------------------
  % \tableofcontents
  % \newpage


  % ----------------------------------------
  \section{Vertical Alignment}
  \subsection{Objectives}
  \begin{enumerate}
    \item Understand basic philosophies in establishing a vertical alignment 
    \item Apply criteria for selection of grades
    \item Design a vertical Curve
  \end{enumerate}

  \subsection{philosophies}
  \begin{enumerate}
    \item conform to the existing terrain (within constraints of max grade and min lengths of vertical curves)
    \item to minimize impacts (balance earthwork)
    \item coordinate horizontal and vertical alignments (HC and VC)
    \begin{enumerate}
      \item avoid steep (near the max) grades and sharp (near min radius) horizontal curve
      \item avoid placing the start of HC in the middle of VC; VC either at HC tangents or at HC vurves 
      \item avoid placing the start of HC at the bottom of a steep VC
    \end{enumerate}
  \end{enumerate}

  \subsection{maximum grades}
  \begin{enumerate}
    \item Steepness and length heavily impacts heavy vehicles.
    \item max grade design criteria is related with: design speed, the functional classification, and terrain
    \item max grades: by AASHTO
    \begin{enumerate}
      \item freeway: 3-6\%, +3.00\% 70mph; max +4.00\% for upgrade, max -5.00\% for downgrade 
      \item arterials: +3.00\% 60mph; up to +8.00\% 40mph at mountainous 
      \item collectors: +4.00\% 70mph; up to +14.00\% 20 mph, mountainous
      \item locals: up to +17.00\% in mountainous terrain
    \end{enumerate}
    \item min grades:
    \begin{enumerate}
      \item urban design(curb and gutter): an appropriate min grade is 0.5\%, but grade of .30\% ...
      \item rural deisgn(shoulder and ditches): ... cross-slope is adaquate ...
    \end{enumerate}
  \end{enumerate}

  \subsection{Vertical Curve}
  \input{Vertical Curve2.txt}  % TODO - crop the drawing
  \begin{align*}
    & \textbf{If $G_1$ and $G_2$ are in slope, e.g. +0.02, x and L must in feet}\\
    \\
    & A = G_2 - G_1  \\
    & \text{A: total change in grade, if negative, the curve is below the tangent}\\
    & \text{$G_n$: grade, like -0.08} \\
    \\
    & Y_{offset} = x^2 \frac{A}{2L} = x^2 \frac{G_2 - G_1}{2L} \\
    & Y_{offset}: \text{vertical offset from a tangent to a parabola, maybe negative!!!} \\
    \\
    & Y_{tan} = Y_{vpc} + G_1x \\
    & Y_{tan}: \text{tangent elevation} \\
    \\
    & Y_{curve} = Y_{vpc} + G_1x + \frac{A}{2L}x^2 \\
    & Y_{curve}: \text{curve elevation} \\
    \\
    & Y_{tan} = Y_{offset} + Y_{curve} \\
    \\
    & x_{hi/lo} = L \frac{G_1}{G_1 - G_2} \\
    & x_{hi/lo}: \text{the highest/lowest point}\\
  \end{align*}


  \subsection{stopping/passing sight distance on crest curves}
  \begin{align*}
    & A = G_2 - G_1 \\
    \\
    & \textbf{*SSD/PSD* minimum length of crest curve:} \\
    & L = \frac{|A|S^2}{200(\sqrt{h_1} + \sqrt{h_2})^2}  \text{   when } S \leq L \\
    & L = 2S - \frac{200(\sqrt{h_1} + \sqrt{h_2})^2}{|A|}  \text{  when } S \geq L \\
    & \text{ stopping: $h_1 = 3.5ft$,  $h_2 = 2.0 ft$ } \\
    & \text{ passing: $h_1 = 3.5ft$,  $h_2 = 3.5ft$} \\
    \\
    & \textbf{*SSD* minimum length of crest curve:} \\
    & L_{SSD} = \frac{|A|S^2}{2158} \text{   when } S \leq L \\
    & L_{SSD} = 2S - \frac{2158}{|A|} \text{  when } S \geq L \\
    \\
    & \textbf{A: in unit \%, e.g. 3, the grade change of VC}\\
    & \text{L: the minimum length of the vertical curve ??? the arc length or the horizontal segment length???}\\
    & \text{S: stop sight distance, related with speed, reaction time, and coefficient of friction} \\
    & h_1: \text{3.5 feet, the driver eye height} \\
    & h_2: \textbf{2.0 feet, the object height} \\
  \end{align*}

  \subsection{sag sight distance}
  TODO diagram??? \\
  \begin{align*}
    & \textbf{minimum length of sag curve} \\
    & L = \frac{|A|S^2}{200(h + S \cdot tan \beta)}   \text{ when } S \leq L \\
    & L = 2S - \frac{200(h + S \cdot tan \beta)}{|A|} \text{ when } S \geq L \\
    \\
    & L = \frac{|A|S^2}{400 + 3.5S} \text{ when } S \leq L \\
    & L = 2S - \frac{400 + 3.5S}{|A|} \text{ when } S \geq L \\
    & \text{A: in unit \%, e.g. 3, the grade change of VC}\\
    & \text{L: the horizontal length of sag curve}\\
    & \text{S: sag sight distance} \\
    & \text{h: 2 feet, the headlamp height}\\
    & \beta: \text{1 degree, the headlamp beam angle}\\
  \end{align*}

  % TODO
  \subsection{Vertical curve design - AASHTO elevation table - $K^a$ factor}
  \begin{align*}
    & \textbf{Another approach to determining curve length! }\\
    &  L = K \cdot A \\
    \\
    & \text{L: in feet, curve length, minimum length for a given design speed }\\
    & \text{A: in unit \%, change in grade, } A= G_2 - G_1\\
    & \text{K: rate of vertical curvature, K = required ft of curve length per 1\% net change in grade }\\
    & \textbf{K: refter to K tables for a given design speed}\\
    & \text{K table for crest VC }\\
    & \text{K table for sag VC }
  \end{align*}

  \subsection{K table for Crest VC, for a given design speed}
  \begin{table}[h!]
  \centering
  \begin{tabular}{|c|c|c|c|}
  \hline
  \textbf{Design Speed (mph)} & \textbf{Stopping Sight Distance (ft)} & \multicolumn{2}{c|}{\textbf{Rate of Vertical Curvature, $K^a$}} \\ \cline{3-4} 
                              &                                       & \textbf{Calculated} & \textbf{Design} \\ \hline
  15                          & 80                                    & 3.0                 & 3               \\ \hline
  20                          & 115                                   & 6.1                 & 7               \\ \hline
  25                          & 155                                   & 11.1                & 12              \\ \hline
  30                          & 200                                   & 18.5                & 19              \\ \hline
  35                          & 250                                   & 29.0                & 29              \\ \hline
  40                          & 305                                   & 43.1                & 44              \\ \hline
  45                          & 360                                   & 60.1                & 61              \\ \hline
  50                          & 425                                   & 83.7                & 84              \\ \hline
  55                          & 495                                   & 113.5               & 114             \\ \hline
  60                          & 570                                   & 150.6               & 151             \\ \hline
  65                          & 645                                   & 192.8               & 193             \\ \hline
  70                          & 730                                   & 246.9               & 247             \\ \hline
  75                          & 820                                   & 311.6               & 312             \\ \hline
  80                          & 910                                   & 383.7               & 384             \\ \hline
  \end{tabular}
  \caption{K Table for Crest Vertical Curve - U.S. Customary}
  \end{table}


  \subsection{K table for Sag VC, for a given design speed}
  \begin{table}[h!]
    \centering
    \begin{tabular}{|c|c|c|c|}
    \hline
    \textbf{Design Speed (mph)} & \textbf{Stopping Sight Distance (ft)} & \multicolumn{2}{c|}{\textbf{Rate of Vertical Curvature, $K^a$}} \\ \cline{3-4} 
                                &                                       & \textbf{Calculated} & \textbf{Design} \\ \hline
    15                          & 80                                    & 9.4                 & 10              \\ \hline
    20                          & 115                                   & 16.5                & 17              \\ \hline
    25                          & 155                                   & 25.5                & 26              \\ \hline
    30                          & 200                                   & 36.4                & 37              \\ \hline
    35                          & 250                                   & 49.0                & 49              \\ \hline
    40                          & 305                                   & 63.4                & 64              \\ \hline
    45                          & 360                                   & 78.1                & 79              \\ \hline
    50                          & 425                                   & 95.7                & 96              \\ \hline
    55                          & 495                                   & 114.9               & 115             \\ \hline
    60                          & 570                                   & 135.7               & 136             \\ \hline
    65                          & 645                                   & 156.5               & 157             \\ \hline
    70                          & 730                                   & 180.3               & 181             \\ \hline
    75                          & 820                                   & 205.6               & 206             \\ \hline
    80                          & 910                                   & 231.0               & 231             \\ \hline
    \end{tabular}
    \caption{K Table for Sag Vertical Curve - U.S. Customary}
    \end{table}
    
  \subsection{elevation(height) in highway design}
    elevations are typically computed at the PVC, PVT, each 100-ft station, and the high or low point\\
    procedure: \\
    \begin{enumerate}
      \item calc A - select vertical tangents
      \item determine station and elevation of PVI 
      \item calculate the minimum length of the curve 
      \begin{enumerate}
        \item - typicallly using SSD and K factor
        \item - A vertical curve length can be selected first, and then checked to verify that K (based on L/A) $\geq K_{min}$
      \end{enumerate}
      \item - Determine stations and elevations of PVC (BVC) and PVT (EVC)
      \begin{align*}
        Sta_{pvc} & = Sta_{pvi} - L/2 \\
        Sta_{pvt} & = Sta_{pvi} + L/2  \\
        Elev_{pvc} & = Elev_{pvi} - G_1 L/2 \\
        Elev_{pvt} & = Elev_{pvi} + G_2 L/2  \\
        \textbf{G} & - \text{grade in decimal, be sure to use correct sign on grade term} \\
        \textbf{L} & - \text{in ft, curve length} \\
      \end{align*}
      \item Compute elevations on initial tangent at full stations, typically to the nearest 0.01 ft
      \begin{align*}
        Elev_x \text{ on initial tangent} & = Elev_{pvc} + G_1 \{(x)/100\} \\
        \textbf{G} & - \text{grade in percent; be sure to use correct sign on grade term} \\
      \end{align*}
      \item Compute the vertical distance y, \textbf{offset from tangent}, between initial tangent and curve
      \begin{align*}
        y & = \frac{Ax^2}{200L} \\
        \textbf{y} & - \text{in ft, offset from tangent} \\
        \textbf{x} & - \text{in ft, distance from PVC} 
      \end{align*}
      \item Compute the elevation on the curve at each full station, or any station of interest!
      \begin{align*}
        Elev_x & = \text{Elev on initial tangent} + offset \\
        \textbf{offset} & - \text{positive for a sag curve, negative for a crest curve}
      \end{align*}
      \item Determine station and elevation of high or low point
      \begin{align*}
        Sta_{high/low} = Sta_{pvc} - \frac{G_1 \cdot L}{A} \\
        Elev_{high/low} = Elev_{pvc} - \frac{G_1 ^ 2 \cdot L}{2A}  \textbf{???}\\
      \end{align*}
    \end{enumerate}


  % ----------------------------------------
  \subsection{Terms}
  gradient: slope rate
  grade: e.g. +4.00\% a upward slope; -3.00\% a downward slope

  \subsection{Rules}

  \subsection{Formulas}

  \subsection{Reference}


% --------------------------------------
\end{document}
